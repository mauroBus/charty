(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/datavalidator",["d3","underscore"],function(d3,_){return factory(_)})}else{root.DataValidator=factory(_)}})(this,function(_){function DataValidator(){}DataValidator.prototype.isPositiveNumber=function(value,message){if(!_.isUndefined(value)&&(!_.isNumber(value)||value<0)){throw new Error(message)}return value};DataValidator.prototype.isNumber=function(value,message){if(!_.isUndefined(value)&&!_.isNumber(value)){throw new Error(message)}return value};DataValidator.prototype.isUndefined=function(value,message){if(_.isUndefined(value)){throw new Error(message)}return value};return DataValidator});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/chartyinit",function(){return factory()})}else{root.Charty=factory()}})(this,function(){var Charty={};return Charty});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/chartynames",["charty/chartyinit"],function(Charty){return factory(Charty)})}else{root.Charty=factory(Charty)}})(this,function(Charty){Charty.CHART_NAMES={AXIS:"Axis",BAR:"Bar",HORIZONTAL_BAR:"HorizontalBar",WIN_LOSS_BAR:"WinLossBar",BASE_CHART:"BaseChart",CIRCLE:"Circle",DONUT:"Donut",LINE:"Line",ROUNDED_RECTANGLE:"RoundedRectangle",TEXT:"Text",ABOVE_TEXT:"AboveText",RIGHT_TEXT:"RightText",WIN_LOSS_TEXT:"WinLossText",TRIANGLE:"Triangle",XY_AXIS:"XYAxis",YXY_AXIS:"YXYAxis",BAR_CHART:"BarChart",LABELED_TRIANGLE_CHART:"LabeledTriangleChart",SCATTERPLOT:"Scatterplot",MULTIPLE_DATA_GROUP:"MultipleDataGroup",MULTIPLE_INSTANCES_MIXIN:"MultipleInstancesMixin",SIMPLE_DATA_GROUP:"SimpleDataGroup",DONUT_INNER_TEXT:"DonutWithInnerText",GROUPED_BAR_CHART:"GroupedBarChart",LINE_CHART:"LineChart",LINE_CHART_CIRCLES:"LineChartCircles",LABELED_TEXT:"LabeledText"};Charty.AXIS_TYPE={ORDINAL:"ordinal",LINEAR:"linear",PEAK_VALLEY_LINEAR:"peakValleyLinear"};Charty.AXIS={X:"x",Y:"y"};return Charty});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/basescale",["d3.chart","charty/chartynames"],function(d3,Charty){return factory(d3,Charty)})}else{root.BaseScale=factory(d3,Charty)}})(this,function(d3,Charty){var BaseScale=function(){};BaseScale.prototype.getScale=function(){return this.scale};BaseScale.prototype.generateRange=function(range){var r;if(this.axisType===Charty.AXIS.X){r=[0,range]}else{if(this.axisType===Charty.AXIS.Y){r=[range,0]}else{throw new Error("No range was defined for this scale.")}}return r};return BaseScale});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/linearscale",["d3.chart","charty/basescale","underscore"],function(d3,BaseScale,_){return factory(d3,BaseScale,_)})}else{root.LinearScale=factory(d3,BaseScale,_)}})(this,function(d3,BaseScale,_){var LinearScale=function(axisType,options){this.scale=d3.scale.linear();this.axisType=axisType;this.niceDomain=options&&options.niceDomain||false};LinearScale.prototype=new BaseScale;LinearScale.prototype.setDomain=function(arrayValues){return this.scale.domain(arrayValues).nice(),this};LinearScale.prototype.setRange=function(range){return this.scale.range(this.generateRange(range)),this};LinearScale.prototype.map=function(value){return this.scale(value)};LinearScale.prototype.band=function(max,value){return max-this.scale(value)};LinearScale.prototype.calculateDomain=function(data,iterator){var max=-Infinity,min=Infinity,d=data.getData(),delta=0;if(d&&!_.isEmpty(d)){_.each(d,function(element){var chartData=element.data;if(chartData&&!_.isEmpty(chartData)){var maxg=d3.max(chartData,iterator),ming=d3.min(chartData,iterator);max=Math.max(maxg,max);min=Math.min(ming,min)}},this);if(this.niceDomain){delta=this.getDelta(max,min);min=min>=0?min:min-delta;delta=max<=0?0:delta}if(!_.isNaN(max)&&!_.isNaN(min)){return this.setMaxValue(max).setDomain([Math.min(0,min),Math.max(0,max+delta)])}}};LinearScale.prototype.getDelta=function(max,min){var step=(max-min)/10+1;return Math.abs(max-min)%step};LinearScale.prototype.setMaxValue=function(maxVal){this.maxValue=maxVal;return this};LinearScale.prototype.getMaxValue=function(){return this.maxValue};return LinearScale});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/ordinalscale",["d3.chart","charty/basescale"],function(d3,BaseScale){return factory(d3,BaseScale)})}else{root.OrdinalScale=factory(d3,BaseScale)}})(this,function(d3,BaseScale){var OrdinalScale=function(axisType,options){this.scale=d3.scale.ordinal();this.axisType=axisType;this.spacing=options&&options.spacing||.1};OrdinalScale.prototype=new BaseScale;OrdinalScale.prototype.setDomain=function(domain){return this.scale=this.scale.domain(domain),this};OrdinalScale.prototype.setRange=function(range){return this.scale=this.scale.rangeRoundBands(this.generateRange(range),this.spacing),this};OrdinalScale.prototype.map=function(value,factor){return this.scale(value)+(this.scale.rangeBand()-this.scale.rangeBand()*factor)/2};OrdinalScale.prototype.band=function(factor){return this.scale.rangeBand()*factor};OrdinalScale.prototype.calculateDomain=function(data,f){return this.setDomain(data.first().data.map(f))};OrdinalScale.prototype.defaultDomain=function(){return this.scale.domain().length===0};return OrdinalScale});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/peakvalleylinearscale",["d3.chart","charty/linearscale","charty/chartynames","underscore"],function(d3,LinearScale,Charty,_){return factory(d3,LinearScale,Charty,_)})}else{root.PeakValleyLinearScale=factory(d3,LinearScale,Charty,_)}})(this,function(d3,LinearScale,Charty,_){var PeakValleyLinearScale=function(){LinearScale.apply(this,arguments)};PeakValleyLinearScale.prototype=new LinearScale;PeakValleyLinearScale.prototype.calculateDomain=function(data,iterator){var max=0,valley=0,peak=0,series=data.getData(),delta=0;if(series&&!_.isEmpty(series)){_.each(series,function(element){var data=element.data,sum=0;if(data&&!_.isEmpty(data)){var maxg=d3.max(data,iterator);max=Math.max(maxg,max);_.each(data,function(point){if(point.reset){sum=0}sum=iterator?sum+iterator(point):sum+point;if(sum>peak){peak=sum}else if(sum<valley){valley=sum}})}},this);if(this.niceDomain){delta=this.getDelta(peak,valley);peak=peak<=0?peak:peak+delta;valley=valley>=0?valley:valley-delta}if(!_.isNaN(peak)&&!_.isNaN(valley)&&!_.isNaN(max)){return this.setMaxValue(max).setDomain([Math.min(0,valley),Math.max(0,peak)])}}};return PeakValleyLinearScale});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/scalesfactory",["charty/chartynames","charty/ordinalscale","charty/linearscale","charty/peakvalleylinearscale"],function(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale){return factory(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale)})}else{root.ScaleFactory=factory(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale)}})(this,function(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale){function ScaleFactory(){}ScaleFactory.prototype.scale=function(options,axisType){var type;if(_.isString(options)){type=options;options={}}else{type=options.name}switch(type){case Charty.AXIS_TYPE.ORDINAL:return new OrdinalScale(axisType,options);case Charty.AXIS_TYPE.LINEAR:return new LinearScale(axisType,options);case Charty.AXIS_TYPE.PEAK_VALLEY_LINEAR:return new PeakValleyLinearScale(axisType,options);default:throw new Error("Provide a value Charty.AXIS_TYPE value")}};return ScaleFactory});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/datamapper",["charty/linearscale","charty/ordinalscale","underscore"],function(LinearScale,OrdinalScale,_){return factory(LinearScale,OrdinalScale,_)})}else{root.DataMapper=factory(LinearScale,OrdinalScale,_)}})(this,function(LinearScale,OrdinalScale,_){var DataMapper=function(){this.scales=[]};DataMapper.prototype.addScale=function(scale,setAsBase){this.baseScale=setAsBase?scale:null;this.scales.push(scale)};DataMapper.prototype.getBaseScale=function(){return this.baseScale};DataMapper.prototype.map=function(dataElement,chartFactor){var pos=0;_.each(this.scales,function(scale){pos+=scale.map(dataElement,chartFactor)});return pos};return DataMapper});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/basechart",["d3.chart","underscore"],function(d3,_){return factory(d3,_)})}else{return factory(d3,_)}})(this,function(d3,_){d3.chart("BaseChart",{width:function(newWidth){this.w=newWidth;_.each(this._mixins,function(element){element.width(newWidth)});return this},height:function(newHeight){this.h=newHeight;_.each(this._mixins,function(element){element.height(newHeight)});return this},setXScale:function(scale){this.xscale=scale;_.each(this._mixins,function(element){element.setXScale(scale)});return this},setYScale:function(scale){this.yscale=scale;_.each(this._mixins,function(element){element.setYScale(scale)});return this},setEventManager:function(evtManager){this.eventManager=evtManager;_.each(this._mixins,function(mixin){if(mixin.setEventManager){mixin.setEventManager(evtManager)}});return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/simpledatagroup",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.SIMPLE_DATA_GROUP,{transform:function(data){return data.next()}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/axis",["d3.chart","underscore","charty/chartynames"],function(d3,_,Charty){return factory(d3,_,Charty)})}else{factory(d3,_,Charty)}})(this,function(d3,_,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.AXIS,{initialize:function(){this.xt=0;this.yt=0;this.cssClass="axis";this.axis=d3.svg.axis();var axisLayerOptions={dataBind:function(d){if(d.getLength()){return this.selectAll("g").data([true])}else{return this.selectAll("g").data([])}},insert:function(){return this.append("g")},events:{enter:function(){var chart=this.chart();if(chart.grid){chart.axis.tickSize(-chart.tsize,0,0)}this.classed(chart.cssClass,true);if(chart.xt!==0||chart.yt!==0){this.attr("transform","translate("+chart.xt+","+chart.yt+")")}if(chart.textLabel){var text=this.append("text").text(chart.textLabel);if(chart.labelRotate){text.attr("transform","translate("+-chart.w/14+","+(chart.h+chart.textLabel.length*chart.h/32)/2+")"+" rotate("+chart.labelRotate+")")}else{text.attr("transform","translate("+(chart.w/2-chart.textLabel.length*3.2)+","+chart.yt/6+")")}}return this},merge:function(){var chart=this.chart(),axis=this.call(chart.axis),xPos=5,yPos=-2,textAnchor="start";if(chart.rotation<0){textAnchor="end";xPos=-xPos;yPos=-yPos}if(chart.rotation){this.selectAll("text").attr("y",yPos).attr("x",xPos).style("text-anchor",textAnchor).attr("transform","rotate("+chart.rotation+")")}return axis},remove:function(){return this.remove()}}};this.layer("axis",this.base.append("g"),axisLayerOptions)},tickSize:function(size){this.tsize=size||0;return this},setScale:function(scale){if(!scale){throw new Error("Undefined scale for axis.")}this.axis.scale(scale.getScale());return this},showAsGrid:function(val){this.grid=val;return this},orient:function(orient){this.axis.orient(orient||"bottom");return this},xtranslate:function(t){this.xt=t;return this},ytranslate:function(t){this.yt=t;return this},setTextLabel:function(label,labelRotate){this.textLabel=label;this.labelRotate=labelRotate;return this},tickCount:function(tCount){if(tCount){this.axis.ticks(tCount)}return this},tickFormat:function(format){if(_.isString(format)){this.axis.tickFormat(d3.format(format))}else if(_.isFunction(format)){this.axis.tickFormat(format)}return this},setClass:function(newClass){if(newClass){this.cssClass=newClass}return this},setRotation:function(degrees){if(degrees){this.rotation=degrees}return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/bar",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.BAR,{initialize:function(){var defaults={c:"bar-default"};var options={dataBind:function(d){var chart=this.chart();chart.c=d.c||defaults.c;return this.selectAll("rect").data(d.data)},insert:function(){return this.append("rect")},events:{enter:function(){this.chart().eventManager.bindAll(this);return this},merge:function(){var chart=this.chart(),zeroY=chart.yscale.map(0),heightZeroY=chart.h-zeroY;this.attr("class",function(d){return d.c||chart.c}).attr("x",function(d){var pos=0;if(chart.zScale){pos+=chart.zScale.map(d.z,1)}return pos+=chart.xscale.map(d.x,chart.factor||1)}).attr("width",chart.xscale.band(chart.factor||1)).attr("y",function(d){return Math.min(zeroY,chart.yscale.map(d.y,chart.factor))}).attr("height",function(d){return Math.abs(chart.yscale.band(chart.h,d.y)-heightZeroY)});return this},exit:function(){return this.remove()}}};this.layer("barlayer",this.base.append("g"),options)},setZScale:function(zScale){this.zScale=zScale;return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/horizontalbar",["d3.chart","charty/chartynames","charty/bar"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BAR).extend(Charty.CHART_NAMES.HORIZONTAL_BAR,{initialize:function(){var barLayer=this.layer("barlayer");barLayer.off("merge");barLayer.on("merge",function(){var chart=this.chart(),zeroX=chart.xscale.map(0);this.attr("class",function(d){return d.c||chart.c}).attr("x",function(d){return chart.xscale.map(Math.min(0,d.x),chart.factor)}).attr("y",function(d){return chart.yscale.map(d.y,chart.factor)}).attr("width",function(d){return Math.abs(chart.xscale.map(d.x)-zeroX)}).attr("height",chart.yscale.band(chart.factor));return this})}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/winlossbar",["d3.chart","charty/chartynames","charty/simpledatagroup","charty/bar"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BAR).extend(Charty.CHART_NAMES.WIN_LOSS_BAR,{initialize:function(){var offset=0;this.layer("barlayer").on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0);this.attr("class",function(d){var customValue=d.c||chart.c||"";if(d.y>0){return"win "+customValue}else{return"loss "+customValue}return d.c||chart.c}).attr("y",function(d){var yScaleMap=chart.yscale.map(d.y,chart.factor),yPos;if(d.reset){offset=0}yPos=Math.min(zeroY,yScaleMap)+offset;offset=offset+yScaleMap-zeroY;return yPos});return this})}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/circle",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.CIRCLE,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRadio:"Invalid value : radius for circles must be positive."};var defaults={r:5,c:"circle-default"};var options={dataBind:function(d){var chart=this.chart();chart.c=d.c||defaults.c;chart.r=dataValidator.isPositiveNumber(d.r,errors.invalidRadio)||defaults.r;return this.selectAll("circle").data(d.data)},insert:function(){return this.append("circle")},events:{enter:function(){this.chart().eventManager.bindAll(this);return this},merge:function(){var chart=this.chart();this.attr("class",function(d){return d.c||chart.c}).attr("r",function(d){return d.r||chart.r}).attr("cx",function(d){return chart.xscale.map(d.x,0)}).attr("cy",function(d){return chart.yscale.map(d.y,0)}).attr("dx",function(d){return d.x}).attr("dy",function(d){return d.y});return this},exit:function(){return this.remove()}}};this.layer("circles",this.base.append("g"),options)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/donut",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.DONUT,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRadius:"Radius for donut chart must be numerical values"};var defaults={ir:90,or:50};var pieLayout=d3.layout.pie().sort(null).value(function(d){return d.y});var arcGen=d3.svg.arc();var options={dataBind:function(data){var chart=this.chart();chart.xPosition=data.xPosition||chart.w/2;chart.yPosition=data.yPosition||chart.h/2;var ir=dataValidator.isNumber(data.ir,errors.invalidRadius)||defaults.ir,or=dataValidator.isNumber(data.or,errors.invalidRadius)||defaults.or;arcGen=arcGen.innerRadius(ir).outerRadius(or);return this.selectAll("path").data(pieLayout(data.data))},insert:function(){return this.append("path")},events:{enter:function(){this.chart().eventManager.bindAll(this);return this},merge:function(){var chart=this.chart();this.attr("transform","translate("+chart.xPosition+","+chart.yPosition+")").attr("class",function(d){return d.data.c}).attr("d",arcGen);return this},exit:function(){return this.remove()}}};this.layer("paths",this.base.append("g"),options)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/line",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE,{initialize:function(){var defaults={c:"line-default"};var line=d3.svg.line();var options={dataBind:function(d){var chart=this.chart();line.x(function(d){return chart.xscale.map(d.x,0)}).y(function(d){return chart.yscale.map(d.y,0)});chart.datum=d.data;chart.c=d.c||defaults.c;return this.selectAll("path").data([0])},insert:function(){return this.append("path")},events:{merge:function(){var chart=this.chart();this.datum(chart.datum).classed(chart.c,true).attr("d",line);return this},exit:function(){return this.remove()}}};this.layer("lineslayer",this.base.append("g"),options)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/roundedrectangle",["d3.chart","underscore","charty/chartynames","charty/simpledatagroup"],function(d3,_,Charty){return factory(d3,_,Charty)})}else{factory(d3,_,Charty)}})(this,function(d3,_,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.ROUNDED_RECTANGLE,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRH:"Invalid value for rectangle height. Must be positive number.",invalidRW:"Invalid value for rectangle width. Must be positive number.",invalidRX:"Invalid value for rectangle rx. Must be positive number.",invalidRY:"Invalid value for rectangle ry. Must be positive number."};var defaults={rh:20,rw:20,rc:"rounded-rectangle-default",rx:5,ry:5};var options={dataBind:function(d){var chart=this.chart();chart.rh=dataValidator.isPositiveNumber(d.rh,errors.invalidRH)||defaults.rh;chart.rw=dataValidator.isPositiveNumber(d.rw,errors.invalidRH)||defaults.rw;chart.rx=dataValidator.isPositiveNumber(d.rx,errors.invalidRX)||defaults.rx;chart.ry=dataValidator.isPositiveNumber(d.ry,errors.invalidRY)||defaults.ry;chart.rc=d.rc||defaults.rc;return this.selectAll("rect").data(d.data)},insert:function(){return this.append("rect")},events:{enter:function(){this.chart().eventManager.bindAll(this);return this},merge:function(){var chart=this.chart();this.attr("height",chart.rh).attr("width",chart.rw).attr("rx",chart.rx).attr("ry",chart.ry).attr("x",_.partial(chart.x,chart)).attr("y",_.partial(chart.y,chart)).attr("class",_.partial(chart["class"],chart));return this},exit:function(){return this.remove()}}};this.layer("roundedrects",this.base,options)},x:function(chart,d){return chart.xscale.map(d.x,1)+chart.xscale.band(1)/2-chart.rw/2},y:function(chart,d){return chart.yscale.map(d.y)-chart.rh},"class":function(chart,d){return d.rc||chart.rc}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/text",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){var Label={initialize:function(){var options={dataBind:this.dataBind,insert:this.insert,events:{enter:this.enter,merge:this.merge,exit:this.exit}};this.layer("texts",this.base.append("g"),options)},x:function(chart,d){return chart.xscale.map(d.x,1)+chart.xscale.band(1)/2},y:function(chart,d){return chart.yscale.map(d.y)-15},dx:function(chart,d){return""},dy:function(chart,d){return""},text:function(d){return d.y},dataBind:function(d){return this.selectAll("text").data(d.data)},insert:function(){return this.append("text")},enter:function(){var chart=this.chart();this.attr("text-anchor","middle").attr("dy","0.35em");chart.eventManager.bindAll(this);return this},merge:function(){var chart=this.chart();this.attr("x",_.partial(chart.x,chart)).attr("y",_.partial(chart.y,chart)).attr("dx",_.partial(chart.dx,chart)).attr("dy",_.partial(chart.dy,chart)).text(chart.text);return this},exit:function(){return this.remove()}};d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.TEXT,Label)});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/abovetext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.ABOVE_TEXT,{initialize:function(){var textLayer=this.layer("texts");textLayer.off("merge");textLayer.on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0);this.attr("x",function(d){var pos=0;if(chart.zScale){pos+=chart.zScale.map(d.z,1)}return pos+=chart.xscale.map(d.x,chart.factor||1)+chart.xscale.band(chart.factor||1)/2}).attr("y",function(d){return Math.min(zeroY,chart.yscale.map(d.y,chart.factor))-7}).text(chart.text)})}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/righttext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.RIGHT_TEXT,{initialize:function(){var textLayer=this.layer("texts");textLayer.off("merge");textLayer.on("merge",function(){var chart=this.chart();this.attr("x",function(d){return chart.xscale.map(d.x,chart.factor)+12}).attr("y",function(d){return chart.yscale.map(d.y,chart.factor)+chart.yscale.band(chart.factor||1)/2}).text(chart.text);return this})}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/winlosstext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.WIN_LOSS_TEXT,{initialize:function(){var textLayer=this.layer("texts");var offset=0;textLayer.off("merge");textLayer.on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0),heightZeroY=chart.h-zeroY;this.attr("x",function(d){var pos=0;if(chart.zScale){pos+=chart.zScale.map(d.z,1)}return pos+=chart.xscale.map(d.x,chart.factor||1)+chart.xscale.band(chart.factor||1)/2}).attr("y",function(d){var yScaleMap=chart.yscale.map(d.y,chart.factor),yPos;if(d.reset){offset=0}yPos=yScaleMap+offset+(chart.yscale.band(chart.h,d.y)-heightZeroY)/2;offset=offset+yScaleMap-zeroY;return yPos}).text(chart.text)})}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/labeledtext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.LABELED_TEXT,{x:function(chart,d){return d.label?chart.xscale.map(d.x,1):0},y:function(chart,d){return d.label?chart.yscale.map(d.y):0},dx:function(chart,d){return d.label&&d.label.text?-(d.label.text.toString().length/4)+"em":0},dy:function(chart,d){return"0.25em"},text:function(d){return d.label?d.label.text||"":""},enter:function(){this.chart().eventManager.bindAll(this)},exit:function(){return this.remove()}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/triangle",["d3.chart","charty/chartynames","underscore","charty/simpledatagroup"],function(d3,Charty,_){return factory(d3,Charty,_)})}else{factory(d3,Charty,_)}})(this,function(d3,Charty,_){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.TRIANGLE,{initialize:function(){var defaults={c:"triangle-default"};var options={dataBind:function(d){var chart=this.chart();chart.c=d.c||defaults.c;return this.selectAll("path").data(d.data)},insert:function(){return this.append("path")},events:{enter:function(){this.chart().eventManager.bindAll(this);return this},merge:function(){var chart=this.chart();this.attr("class",function(d){return d.c||chart.c}).attr("d",function(d){return chart.getPath(d)});return this},exit:function(){return this.remove()}}};this.layer("triangles",this.base.append("g"),options)},transform:function(data){var result=[],dataArray=data.next().data,self=this,xBand=this.xscale.band(1),zeroY=this.yscale.map(0);_.each(dataArray,function(element){var x1=self.xscale.map(element.x,1),x2=x1+xBand/2,x3=x1+xBand,y1=zeroY,y2=self.yscale.map(element.y);result.unshift({x1:x1,y1:y1,x2:x2,y2:y2,x3:x2,y3:y1,c:element.c1,x:element.x,y:element.y});result.unshift({x1:x2,y1:y1,x2:x2,y2:y2,x3:x3,y3:y1,c:element.c2,x:element.x,y:element.y})});return{data:result,c:data.first().c}},getPath:function(d){return"M "+d.x1+" "+d.y1+" L "+d.x2+" "+d.y2+" L "+d.x3+" "+d.y3}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/multipledatagroup",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP,{transform:function(data){this._calculateDomains(data);return data},setDefaultXDomain:function(domain){this.defaultXDomain=domain;return this},setDefaultYDomain:function(domain){this.defaultYDomain=domain;return this},_calculateDomains:function(data){if(this.defaultXDomain){this.xscale.setDomain(this.defaultXDomain)}else{this.xscale.calculateDomain(data,function(d){return d.x})}if(this.zScale){this.xscale.setRange(this.zScale.band(1))}else{this.xscale.setRange(this.w)}if(this.defaultYDomain){this.yscale.setDomain(this.defaultYDomain)}else{this.yscale.calculateDomain(data,function(d){return d.y})}this.yscale.setRange(this.h)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/multipleinstancesmixin",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,{initialize:function(args){var f=args.instances;this.componentsMixins=[];for(var i=args.instances-1;i>=0;i--){var instance=this.mixin(args.chartName,this.base.append("g"),args);instance.factor=f--/args.instances}}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/xyaxis",["d3.chart","charty/chartynames","charty/axis"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.XY_AXIS,{initialize:function(args){this.xaxis=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("bottom").setTextLabel(args.xAxisLabel).tickCount(args.xTickCount).tickFormat(args.xAxisTickFormat).setClass(args.xAxisClass).setRotation(args.xAxisTickRotation);this.yaxis=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("left").setTextLabel(args.yAxisLabel,"-90").tickCount(args.yTickCount).tickFormat(args.yAxisTickFormat).setClass(args.yAxisClass).setRotation(args.yAxisTickRotation)},showAsGrid:function(showAsGrid){this.xaxis.showAsGrid(showAsGrid);this.yaxis.showAsGrid(showAsGrid);return this},height:function(newHeight){this.xaxis.ytranslate(newHeight).tickSize(newHeight);this.yaxis.height(newHeight);return this},width:function(newWidth){this.yaxis.tickSize(newWidth).width(newWidth);this.xaxis.width(newWidth);return this},setXScale:function(scale){this.xaxis.setScale(scale);return this},setYScale:function(scale){this.yaxis.setScale(scale);return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/yxyaxis",["d3.chart","charty/chartynames","charty/xyaxis"],function(d3,Charty){return factory(d3,Charty)})}else{return factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.YXY_AXIS,{initialize:function(args){this.xyaxis=this.mixin(Charty.CHART_NAMES.XY_AXIS,this.base.append("g"),args);this.yaxisright=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("right").tickCount(args.yTickCount).tickFormat(args.yAxisTickFormat)},showAsGrid:function(showAsGrid){this.xyaxis.showAsGrid(showAsGrid);return this},height:function(newHeight){this.xyaxis.height(newHeight);return this},width:function(newWidth){this.yaxisright.xtranslate(newWidth);this.xyaxis.width(newWidth);return this},setXScale:function(scale){this.xyaxis.setXScale(scale);return this},setYScale:function(scale){this.xyaxis.setYScale(scale);this.yaxisright.setScale(scale);return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/barchart",["d3.chart","charty/chartynames","underscore","charty/bar","charty/horizontalbar","charty/multipledatagroup","charty/xyaxis","charty/yxyaxis","charty/multipleinstancesmixin","charty/text","charty/abovetext","charty/righttext"],function(d3,Charty,_){return factory(d3,Charty,_)})}else{factory(d3,Charty,_)}})(this,function(d3,Charty,_){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.BAR_CHART,{initialize:function(args){args.instances=args.instances||1;args.chartName=args.barType;this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid);this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args);if(args.labelType){this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),_.extend(args,{chartName:args.labelType}))}}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/groupedbarchart",["d3.chart","charty/scalesfactory","charty/chartynames","charty/bar","charty/xyaxis","charty/multipledatagroup","charty/multipleinstancesmixin"],function(d3,ScaleFactory,Charty){return factory(d3,ScaleFactory,Charty)})}else{return factory(d3,ScaleFactory,Charty)}})(this,function(d3,ScaleFactory,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.GROUPED_BAR_CHART,{initialize:function(args){this.axisSystem=this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid);this.bars=this.mixin(Charty.CHART_NAMES.BAR,this.base.append("g"),args)},transform:function(data){data.first();if(this.defaultZDomain){this.zScale.setDomain(this.defaultZDomain)}else{this.zScale.calculateDomain(data,function(d){return d.z})}this.zScale.setRange(this.w);this._calculateDomains(data);this.axisSystem.setXScale(this.zScale);this.bars.setZScale(this.zScale);return data},setZScale:function(zScale){if(zScale){this.zScale=zScale}return this},setDefaultZDomain:function(zDomain){this.defaultZDomain=zDomain;
return this}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/donutwithinnertext",["d3.chart","charty/chartynames","charty/donut"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.DONUT).extend(Charty.CHART_NAMES.DONUT_INNER_TEXT,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidFontSize:"Invalid value : font size must be positive"};var defaults={fontSize:55};var options={dataBind:function(d){var chart=this.chart(),data=d.data,stringValue=data[0].y.toString()+"%";chart.fontSize=dataValidator.isPositiveNumber(d.fontSize,errors.invalidFontSize)||defaults.fontSize;chart.xPosition=d.xPosition||chart.w/2;chart.yPosition=d.yPosition||chart.h/2;return this.selectAll("text").data([stringValue])},insert:function(){return this.append("text")},events:{enter:function(){var chart=this.chart();this.attr("x",chart.xPosition).attr("y",chart.yPosition).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size",chart.fontSize).text(function(d){return d});return this},update:function(){this.text(function(d){return d});return this},exit:function(){return this.remove()}}};this.layer("donutText",this.base.append("g"),options)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/labeledtrianglechart",["d3.chart","charty/chartynames","charty/triangle","charty/roundedrectangle","charty/text","charty/multipleinstancesmixin","charty/yxyaxis","charty/multipledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LABELED_TRIANGLE_CHART,{initialize:function(args){this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid);this.mixin(Charty.CHART_NAMES.TRIANGLE,this.base.append("g"),args);this.mixin(Charty.CHART_NAMES.ROUNDED_RECTANGLE,this.base.append("g"),args);this.mixin(Charty.CHART_NAMES.TEXT,this.base.append("g"),args)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/linechart",["d3.chart","charty/chartynames","charty/line","charty/multipledatagroup"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE_CHART,{initialize:function(args){args.chartName=Charty.CHART_NAMES.LINE;args.instances=args.instances||1;this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid);this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/linechartcircles",["d3.chart","charty/chartynames","charty/multipledatagroup","charty/linechart","charty/multipleinstancesmixin"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE_CHART_CIRCLES,{initialize:function(args){this.mixin(Charty.CHART_NAMES.LINE_CHART,this.base.append("g"),args);args.chartName=Charty.CHART_NAMES.CIRCLE;args.instances=args.instances||1;this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/scatterplot",["d3.chart","charty/chartynames","charty/circle","charty/multipledatagroup","charty/yxyaxis","charty/multipleinstancesmixin","charty/labeledtext"],function(d3,Charty){return factory(d3,Charty)})}else{factory(d3,Charty)}})(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.SCATTERPLOT,{initialize:function(args){args.chartName=Charty.CHART_NAMES.CIRCLE;args.instances=args.instances||1;this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid);this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base,args);args.chartName=Charty.CHART_NAMES.LABELED_TEXT;this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base,args)}})});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/accessor",function(){return factory()})}else{root.Accessor=factory()}})(this,function(){function Accessor(){this.index=-1}Accessor.prototype.first=function(){return this.data[0]};Accessor.prototype.next=function(){if(!this.hasNext()){this.restart()}return this.data[++this.index]};Accessor.prototype.hasNext=function(){return this.index+1<this.data.length};Accessor.prototype.restart=function(){this.index=-1;return this};Accessor.prototype.getData=function(){return this.data};Accessor.prototype.setData=function(data){this.data=data;return this};Accessor.prototype.getLength=function(){return this.data.length};return Accessor});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/functionevent",[],function(){return factory()})}else{root.FunctionEvent=factory()}})(this,function(){function FunctionEvent(options){this.opts=options}FunctionEvent.prototype.bind=function(target){target.on(this.opts.on,this.opts.execute);return this};return FunctionEvent});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/bootstrapevent",["bootstrap","underscore","d3"],function($,_,d3){return factory($,_,d3)})}else{root.BootstrapEvent=factory($,_,d3)}})(this,function($,_){function BootstrapEvent(options){this.opts=options}BootstrapEvent.prototype.bind=function(target){var self=this;_.each(target[0],function(element){var d3Element=d3.select(element);d3Element.attr("data-toggle",self.opts.type);$(element)[self.opts.type]({placement:self.opts.placement,trigger:self.opts.trigger,html:true,container:"body",context:d3Element,content:function(){return self.opts.content(element)}})});return this};return BootstrapEvent});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/eventfactory",["charty/functionevent","charty/bootstrapevent"],function(FunctionEvent,BootstrapEvent){return factory(FunctionEvent,BootstrapEvent)})}else{root.EventFactory=factory(FunctionEvent,BootstrapEvent)}})(this,function(FunctionEvent,BootstrapEvent){function EventFactory(){}EventFactory.prototype.createEvent=function(e){var EventObject=null;switch(e.type){case"function":EventObject=new FunctionEvent({on:e.evt,execute:e.bind});break;case"bootstrap":EventObject=new BootstrapEvent({trigger:e.evt,type:e.element,content:e.bind,placement:e.placement});break;default:break}return EventObject};return EventFactory});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/eventmanager",["charty/functionevent","charty/bootstrapevent","underscore"],function(FunctionEvent,BootstrapEvent,_){return factory(FunctionEvent,BootstrapEvent,_)})}else{root.EventManager=factory(FunctionEvent,BootstrapEvent,_)}})(this,function(FunctionEvent,BootstrapEvent,_){function EventManager(){this.events=[]}EventManager.prototype.addEvent=function(e){this.events.push(e);return this};EventManager.prototype.bindAll=function(t){_.each(this.events,function(e){e.bind(t)});return this};return EventManager});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/chartinterface",["charty/accessor","charty/eventmanager","charty/eventfactory","underscore"],function(Accessor,EventManager,EventFactory,_){return factory(Accessor,EventManager,EventFactory,_)})}else{root.ChartInterface=factory(Accessor,EventManager,EventFactory,_)}})(this,function(Accessor,EventManager,EventFactory,_){var ChartInterface=function(chart,rootSelection,svg,gSvg,eventFactory){this.accessor=new Accessor;this.chart=chart;this.rootSelection=rootSelection;this.svg=svg;this.gSvg=gSvg;this.eventFactory=eventFactory};ChartInterface.prototype.setDimensions=function(margin,width,height){var marginValues={left:0,top:0,right:0,bottom:0,lfactor:1,tfactor:1};var svgHeight=height||parseInt(this.rootSelection.style("height"),10)||200,svgWidth=width||parseInt(this.rootSelection.style("width"),10)||200;this.svg.attr("width",svgWidth).attr("height",svgHeight).attr("viewBox","0 0 "+svgWidth+" "+svgHeight).attr("preserveAspectRatio","xMinYMin");if(margin){marginValues={left:margin.marginleft||0,top:margin.margintop||0,right:margin.marginright||0,bottom:margin.marginbottom||0,lfactor:margin.marginlfactor||1,tfactor:margin.margintfactor||1};this.gSvg.attr("transform","translate("+marginValues.left+","+marginValues.top+")")}svgWidth=(svgWidth-marginValues.right)*marginValues.lfactor;svgHeight=(svgHeight-marginValues.bottom)*marginValues.tfactor;this.chart.height(svgHeight).width(svgWidth)};ChartInterface.prototype.draw=function(dataArray,eventsArray){var eventManager=new EventManager,self=this;_.each(eventsArray,function(e){eventManager.addEvent(self.eventFactory.createEvent(e))});this.chart.setEventManager(eventManager);this.accessor.setData(dataArray);this.chart.draw(this.accessor);return this};ChartInterface.prototype.redimension=function(height,width){var rootHeight=height||parseInt(this.rootSelection.style("height"),10),rootWidth=width||parseInt(this.rootSelection.style("width"),10),svgHeight=parseInt(this.svg.style("height"),10),svgWidth=parseInt(this.svg.style("width"),10);if(rootHeight!==svgHeight||rootWidth!==svgWidth){this.svg.attr("height",rootHeight);this.svg.attr("width",rootWidth)}return this};ChartInterface.prototype.setBackgroundImage=function(imgClass){this.rootSelection.classed(imgClass,true);this.imgClass=imgClass;return this};ChartInterface.prototype.removeBackgroundImage=function(){this.rootSelection.classed(this.imgClass,false);return this};ChartInterface.prototype.setTitle=function(title,xPosition,yPosition){this.svg.append("text").attr("x",xPosition||0).attr("y",yPosition||30).text(title);return this};return ChartInterface});(function(root,factory){if(typeof define==="function"&&define.amd){define("charty/charty",["charty/chartynames","charty/scalesfactory","charty/chartinterface","charty/datavalidator","charty/eventfactory","charty/barchart","charty/labeledtrianglechart","charty/linechart","charty/scatterplot","charty/donut","charty/donutwithinnertext","charty/linechartcircles","charty/groupedbarchart","charty/winlossbar","charty/winlosstext","charty/labeledtext"],function(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory){return factory(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory)})}else{root.Charty=factory(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory)}})(this,function(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory){var scaleFactory=new ScaleFactory,dataValidator=new DataValidator,eventFactory=new EventFactory;Charty.chart=function(options){if(!options.root||!options.chartName){throw new Error("Root element or chart name not defined")}var selection=d3.select(options.root);var svg=selection.append("svg");if(options.gradients){var defs=svg.append("defs");_.each(options.gradients,function(gradient){var grad=defs.append("linearGradient");grad.attr("id",gradient.id);if(gradient.orientation==="vertical"){grad.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",1)}_.each(gradient.classes,function(gradientClass){grad.append("stop").attr("class",gradientClass.className).attr("offset",gradientClass.offset)})})}var gSvg=svg.append("g");options.dataValidator=dataValidator;var chart=gSvg.chart(options.chartName,options);if(options.xAxis){chart.setXScale(scaleFactory.scale(options.xAxis,"x"))}if(options.yAxis){chart.setYScale(scaleFactory.scale(options.yAxis,"y"))}if(options.zAxis){chart.setZScale(scaleFactory.scale(options.zAxis,"x"))}if(options.defaultXDomain){chart.setDefaultXDomain(options.defaultXDomain)}if(options.defaultYDomain){chart.setDefaultYDomain(options.defaultYDomain)}if(options.defaultZDomain){chart.setDefaultZDomain(options.defaultZDomain)}return new ChartInterface(chart,selection,svg,gSvg,eventFactory)};return Charty});
//# sourceMappingURL=charty.min.js.map