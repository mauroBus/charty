/*! charty - v0.6.0 - 2014-08-23T23:20:58 */
!function(root,factory){"function"==typeof define&&define.amd?define("charty/datavalidator",["d3","underscore"],function(d3,_){return factory(_)}):root.DataValidator=factory(_)}(this,function(_){function DataValidator(){}return DataValidator.prototype.isPositiveNumber=function(value,message){if(!_.isUndefined(value)&&(!_.isNumber(value)||0>value))throw new Error(message);return value},DataValidator.prototype.isNumber=function(value,message){if(!_.isUndefined(value)&&!_.isNumber(value))throw new Error(message);return value},DataValidator.prototype.isUndefined=function(value,message){if(_.isUndefined(value))throw new Error(message);return value},DataValidator}),function(root,factory){"function"==typeof define&&define.amd?define("charty/chartyinit",function(){return factory()}):root.Charty=factory()}(this,function(){var Charty={};return Charty}),function(root,factory){"function"==typeof define&&define.amd?define("charty/chartynames",["charty/chartyinit"],function(Charty){return factory(Charty)}):root.Charty=factory(Charty)}(this,function(Charty){return Charty.CHART_NAMES={AXIS:"Axis",BAR:"Bar",HORIZONTAL_BAR:"HorizontalBar",WIN_LOSS_BAR:"WinLossBar",BASE_CHART:"BaseChart",CIRCLE:"Circle",DONUT:"Donut",LINE:"Line",ROUNDED_RECTANGLE:"RoundedRectangle",TEXT:"Text",ABOVE_TEXT:"AboveText",RIGHT_TEXT:"RightText",WIN_LOSS_TEXT:"WinLossText",TRIANGLE:"Triangle",XY_AXIS:"XYAxis",YXY_AXIS:"YXYAxis",BAR_CHART:"BarChart",LABELED_TRIANGLE_CHART:"LabeledTriangleChart",SCATTERPLOT:"Scatterplot",MULTIPLE_DATA_GROUP:"MultipleDataGroup",MULTIPLE_INSTANCES_MIXIN:"MultipleInstancesMixin",SIMPLE_DATA_GROUP:"SimpleDataGroup",DONUT_INNER_TEXT:"DonutWithInnerText",GROUPED_BAR_CHART:"GroupedBarChart",LINE_CHART:"LineChart",LINE_CHART_CIRCLES:"LineChartCircles",LABELED_TEXT:"LabeledText"},Charty.AXIS_TYPE={ORDINAL:"ordinal",LINEAR:"linear",PEAK_VALLEY_LINEAR:"peakValleyLinear"},Charty.AXIS={X:"x",Y:"y"},Charty}),function(root,factory){"function"==typeof define&&define.amd?define("charty/basescale",["d3.chart","charty/chartynames"],function(d3,Charty){return factory(d3,Charty)}):root.BaseScale=factory(d3,Charty)}(this,function(d3,Charty){var BaseScale=function(){};return BaseScale.prototype.getScale=function(){return this.scale},BaseScale.prototype.generateRange=function(range){var r;if(this.axisType===Charty.AXIS.X)r=[0,range];else{if(this.axisType!==Charty.AXIS.Y)throw new Error("No range was defined for this scale.");r=[range,0]}return r},BaseScale}),function(root,factory){"function"==typeof define&&define.amd?define("charty/linearscale",["d3.chart","charty/basescale","underscore"],function(d3,BaseScale,_){return factory(d3,BaseScale,_)}):root.LinearScale=factory(d3,BaseScale,_)}(this,function(d3,BaseScale,_){var LinearScale=function(axisType,options){this.scale=d3.scale.linear(),this.axisType=axisType,this.niceDomain=options&&options.niceDomain||!1};return LinearScale.prototype=new BaseScale,LinearScale.prototype.setDomain=function(arrayValues){return this.scale.domain(arrayValues).nice(),this},LinearScale.prototype.setRange=function(range){return this.scale.range(this.generateRange(range)),this},LinearScale.prototype.map=function(value){return this.scale(value)},LinearScale.prototype.band=function(max,value){return max-this.scale(value)},LinearScale.prototype.calculateDomain=function(data,iterator){var max=-1/0,min=1/0,d=data.getData(),delta=0;return!d||_.isEmpty(d)||(_.each(d,function(element){var chartData=element.data;if(chartData&&!_.isEmpty(chartData)){var maxg=d3.max(chartData,iterator),ming=d3.min(chartData,iterator);max=Math.max(maxg,max),min=Math.min(ming,min)}},this),this.niceDomain&&(delta=this.getDelta(max,min),min=min>=0?min:min-delta,delta=0>=max?0:delta),_.isNaN(max)||_.isNaN(min))?void 0:this.setMaxValue(max).setDomain([Math.min(0,min),Math.max(0,max+delta)])},LinearScale.prototype.getDelta=function(max,min){var step=(max-min)/10+1;return Math.abs(max-min)%step},LinearScale.prototype.setMaxValue=function(maxVal){return this.maxValue=maxVal,this},LinearScale.prototype.getMaxValue=function(){return this.maxValue},LinearScale}),function(root,factory){"function"==typeof define&&define.amd?define("charty/ordinalscale",["d3.chart","charty/basescale"],function(d3,BaseScale){return factory(d3,BaseScale)}):root.OrdinalScale=factory(d3,BaseScale)}(this,function(d3,BaseScale){var OrdinalScale=function(axisType,options){this.scale=d3.scale.ordinal(),this.axisType=axisType,this.spacing=options&&options.spacing||.1};return OrdinalScale.prototype=new BaseScale,OrdinalScale.prototype.setDomain=function(domain){return this.scale=this.scale.domain(domain),this},OrdinalScale.prototype.setRange=function(range){return this.scale=this.scale.rangeRoundBands(this.generateRange(range),this.spacing),this},OrdinalScale.prototype.map=function(value,factor){return this.scale(value)+(this.scale.rangeBand()-this.scale.rangeBand()*factor)/2},OrdinalScale.prototype.band=function(factor){return this.scale.rangeBand()*factor},OrdinalScale.prototype.calculateDomain=function(data,f){return this.setDomain(data.first().data.map(f))},OrdinalScale.prototype.defaultDomain=function(){return 0===this.scale.domain().length},OrdinalScale}),function(root,factory){"function"==typeof define&&define.amd?define("charty/peakvalleylinearscale",["d3.chart","charty/linearscale","charty/chartynames","underscore"],function(d3,LinearScale,Charty,_){return factory(d3,LinearScale,Charty,_)}):root.PeakValleyLinearScale=factory(d3,LinearScale,Charty,_)}(this,function(d3,LinearScale,Charty,_){var PeakValleyLinearScale=function(){LinearScale.apply(this,arguments)};return PeakValleyLinearScale.prototype=new LinearScale,PeakValleyLinearScale.prototype.calculateDomain=function(data,iterator){var max=0,valley=0,peak=0,series=data.getData(),delta=0;return!series||_.isEmpty(series)||(_.each(series,function(element){var data=element.data,sum=0;if(data&&!_.isEmpty(data)){var maxg=d3.max(data,iterator);max=Math.max(maxg,max),_.each(data,function(point){point.reset&&(sum=0),sum=iterator?sum+iterator(point):sum+point,sum>peak?peak=sum:valley>sum&&(valley=sum)})}},this),this.niceDomain&&(delta=this.getDelta(peak,valley),peak=0>=peak?peak:peak+delta,valley=valley>=0?valley:valley-delta),_.isNaN(peak)||_.isNaN(valley)||_.isNaN(max))?void 0:this.setMaxValue(max).setDomain([Math.min(0,valley),Math.max(0,peak)])},PeakValleyLinearScale}),function(root,factory){"function"==typeof define&&define.amd?define("charty/scalesfactory",["charty/chartynames","charty/ordinalscale","charty/linearscale","charty/peakvalleylinearscale"],function(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale){return factory(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale)}):root.ScaleFactory=factory(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale)}(this,function(Charty,OrdinalScale,LinearScale,PeakValleyLinearScale){function ScaleFactory(){}return ScaleFactory.prototype.scale=function(options,axisType){var type;switch(_.isString(options)?(type=options,options={}):type=options.name,type){case Charty.AXIS_TYPE.ORDINAL:return new OrdinalScale(axisType,options);case Charty.AXIS_TYPE.LINEAR:return new LinearScale(axisType,options);case Charty.AXIS_TYPE.PEAK_VALLEY_LINEAR:return new PeakValleyLinearScale(axisType,options);default:throw new Error("Provide a value Charty.AXIS_TYPE value")}},ScaleFactory}),function(root,factory){"function"==typeof define&&define.amd?define("charty/datamapper",["charty/linearscale","charty/ordinalscale","underscore"],function(LinearScale,OrdinalScale,_){return factory(LinearScale,OrdinalScale,_)}):root.DataMapper=factory(LinearScale,OrdinalScale,_)}(this,function(LinearScale,OrdinalScale,_){var DataMapper=function(){this.scales=[]};return DataMapper.prototype.addScale=function(scale,setAsBase){this.baseScale=setAsBase?scale:null,this.scales.push(scale)},DataMapper.prototype.getBaseScale=function(){return this.baseScale},DataMapper.prototype.map=function(dataElement,chartFactor){var pos=0;return _.each(this.scales,function(scale){pos+=scale.map(dataElement,chartFactor)}),pos},DataMapper}),function(root,factory){return"function"==typeof define&&define.amd?void define("charty/basechart",["d3.chart","underscore"],function(d3,_){return factory(d3,_)}):factory(d3,_)}(this,function(d3,_){d3.chart("BaseChart",{width:function(newWidth){return this.w=newWidth,_.each(this._mixins,function(element){element.width(newWidth)}),this},height:function(newHeight){return this.h=newHeight,_.each(this._mixins,function(element){element.height(newHeight)}),this},setXScale:function(scale){return this.xscale=scale,_.each(this._mixins,function(element){element.setXScale(scale)}),this},setYScale:function(scale){return this.yscale=scale,_.each(this._mixins,function(element){element.setYScale(scale)}),this},setEventManager:function(evtManager){return this.eventManager=evtManager,_.each(this._mixins,function(mixin){mixin.setEventManager&&mixin.setEventManager(evtManager)}),this}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/simpledatagroup",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.SIMPLE_DATA_GROUP,{transform:function(data){return data.next()}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/axis",["d3.chart","underscore","charty/chartynames"],function(d3,_,Charty){return factory(d3,_,Charty)}):factory(d3,_,Charty)}(this,function(d3,_,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.AXIS,{initialize:function(){this.xt=0,this.yt=0,this.cssClass="axis",this.axis=d3.svg.axis();var axisLayerOptions={dataBind:function(d){return this.selectAll("g").data(d.getLength()?[!0]:[])},insert:function(){return this.append("g")},events:{enter:function(){var chart=this.chart();if(chart.grid&&chart.axis.tickSize(-chart.tsize,0,0),this.classed(chart.cssClass,!0),(0!==chart.xt||0!==chart.yt)&&this.attr("transform","translate("+chart.xt+","+chart.yt+")"),chart.textLabel){var text=this.append("text").text(chart.textLabel);chart.labelRotate?text.attr("transform","translate("+-chart.w/14+","+(chart.h+chart.textLabel.length*chart.h/32)/2+") rotate("+chart.labelRotate+")"):text.attr("transform","translate("+(chart.w/2-3.2*chart.textLabel.length)+","+chart.yt/6+")")}return this},merge:function(){var chart=this.chart(),axis=this.call(chart.axis),xPos=5,yPos=-2,textAnchor="start";return chart.rotation<0&&(textAnchor="end",xPos=-xPos,yPos=-yPos),chart.rotation&&this.selectAll("text").attr("y",yPos).attr("x",xPos).style("text-anchor",textAnchor).attr("transform","rotate("+chart.rotation+")"),axis},remove:function(){return this.remove()}}};this.layer("axis",this.base.append("g"),axisLayerOptions)},tickSize:function(size){return this.tsize=size||0,this},setScale:function(scale){if(!scale)throw new Error("Undefined scale for axis.");return this.axis.scale(scale.getScale()),this},showAsGrid:function(val){return this.grid=val,this},orient:function(orient){return this.axis.orient(orient||"bottom"),this},xtranslate:function(t){return this.xt=t,this},ytranslate:function(t){return this.yt=t,this},setTextLabel:function(label,labelRotate){return this.textLabel=label,this.labelRotate=labelRotate,this},tickCount:function(tCount){return tCount&&this.axis.ticks(tCount),this},tickFormat:function(format){return _.isString(format)?this.axis.tickFormat(d3.format(format)):_.isFunction(format)&&this.axis.tickFormat(format),this},setClass:function(newClass){return newClass&&(this.cssClass=newClass),this},setRotation:function(degrees){return degrees&&(this.rotation=degrees),this}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/bar",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.BAR,{initialize:function(){var defaults={c:"bar-default"},options={dataBind:function(d){var chart=this.chart();return chart.c=d.c||defaults.c,this.selectAll("rect").data(d.data)},insert:function(){return this.append("rect")},events:{enter:function(){return this.chart().eventManager.bindAll(this),this},merge:function(){var chart=this.chart(),zeroY=chart.yscale.map(0),heightZeroY=chart.h-zeroY;return this.attr("class",function(d){return d.c||chart.c}).attr("x",function(d){var pos=0;return chart.zScale&&(pos+=chart.zScale.map(d.z,1)),pos+=chart.xscale.map(d.x,chart.factor||1)}).attr("width",chart.xscale.band(chart.factor||1)).attr("y",function(d){return Math.min(zeroY,chart.yscale.map(d.y,chart.factor))}).attr("height",function(d){return Math.abs(chart.yscale.band(chart.h,d.y)-heightZeroY)}),this},exit:function(){return this.remove()}}};this.layer("barlayer",this.base.append("g"),options)},setZScale:function(zScale){return this.zScale=zScale,this}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/horizontalbar",["d3.chart","charty/chartynames","charty/bar"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BAR).extend(Charty.CHART_NAMES.HORIZONTAL_BAR,{initialize:function(){var barLayer=this.layer("barlayer");barLayer.off("merge"),barLayer.on("merge",function(){var chart=this.chart(),zeroX=chart.xscale.map(0);return this.attr("class",function(d){return d.c||chart.c}).attr("x",function(d){return chart.xscale.map(Math.min(0,d.x),chart.factor)}).attr("y",function(d){return chart.yscale.map(d.y,chart.factor)}).attr("width",function(d){return Math.abs(chart.xscale.map(d.x)-zeroX)}).attr("height",chart.yscale.band(chart.factor)),this})}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/winlossbar",["d3.chart","charty/chartynames","charty/simpledatagroup","charty/bar"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BAR).extend(Charty.CHART_NAMES.WIN_LOSS_BAR,{initialize:function(){var offset=0;this.layer("barlayer").on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0);return this.attr("class",function(d){var customValue=d.c||chart.c||"";return d.y>0?"win "+customValue:"loss "+customValue}).attr("y",function(d){var yPos,yScaleMap=chart.yscale.map(d.y,chart.factor);return d.reset&&(offset=0),yPos=Math.min(zeroY,yScaleMap)+offset,offset=offset+yScaleMap-zeroY,yPos}),this})}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/circle",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.CIRCLE,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRadio:"Invalid value : radius for circles must be positive."},defaults={r:5,c:"circle-default"},options={dataBind:function(d){var chart=this.chart();return chart.c=d.c||defaults.c,chart.r=dataValidator.isPositiveNumber(d.r,errors.invalidRadio)||defaults.r,this.selectAll("circle").data(d.data)},insert:function(){return this.append("circle")},events:{enter:function(){return this.chart().eventManager.bindAll(this),this},merge:function(){var chart=this.chart();return this.attr("class",function(d){return d.c||chart.c}).attr("r",function(d){return d.r||chart.r}).attr("cx",function(d){return chart.xscale.map(d.x,0)}).attr("cy",function(d){return chart.yscale.map(d.y,0)}).attr("dx",function(d){return d.x}).attr("dy",function(d){return d.y}),this},exit:function(){return this.remove()}}};this.layer("circles",this.base.append("g"),options)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/donut",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.DONUT,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRadius:"Radius for donut chart must be numerical values"},defaults={ir:90,or:50},pieLayout=d3.layout.pie().sort(null).value(function(d){return d.y}),arcGen=d3.svg.arc(),options={dataBind:function(data){var chart=this.chart();chart.xPosition=data.xPosition||chart.w/2,chart.yPosition=data.yPosition||chart.h/2;var ir=dataValidator.isNumber(data.ir,errors.invalidRadius)||defaults.ir,or=dataValidator.isNumber(data.or,errors.invalidRadius)||defaults.or;return arcGen=arcGen.innerRadius(ir).outerRadius(or),this.selectAll("path").data(pieLayout(data.data))},insert:function(){return this.append("path")},events:{enter:function(){return this.chart().eventManager.bindAll(this),this},merge:function(){var chart=this.chart();return this.attr("transform","translate("+chart.xPosition+","+chart.yPosition+")").attr("class",function(d){return d.data.c}).attr("d",arcGen),this},exit:function(){return this.remove()}}};this.layer("paths",this.base.append("g"),options)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/line",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE,{initialize:function(){var defaults={c:"line-default"},line=d3.svg.line(),options={dataBind:function(d){var chart=this.chart();return line.x(function(d){return chart.xscale.map(d.x,0)}).y(function(d){return chart.yscale.map(d.y,0)}),chart.datum=d.data,chart.c=d.c||defaults.c,this.selectAll("path").data([0])},insert:function(){return this.append("path")},events:{merge:function(){var chart=this.chart();return this.datum(chart.datum).classed(chart.c,!0).attr("d",line),this},exit:function(){return this.remove()}}};this.layer("lineslayer",this.base.append("g"),options)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/roundedrectangle",["d3.chart","underscore","charty/chartynames","charty/simpledatagroup"],function(d3,_,Charty){return factory(d3,_,Charty)}):factory(d3,_,Charty)}(this,function(d3,_,Charty){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.ROUNDED_RECTANGLE,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidRH:"Invalid value for rectangle height. Must be positive number.",invalidRW:"Invalid value for rectangle width. Must be positive number.",invalidRX:"Invalid value for rectangle rx. Must be positive number.",invalidRY:"Invalid value for rectangle ry. Must be positive number."},defaults={rh:20,rw:20,rc:"rounded-rectangle-default",rx:5,ry:5},options={dataBind:function(d){var chart=this.chart();return chart.rh=dataValidator.isPositiveNumber(d.rh,errors.invalidRH)||defaults.rh,chart.rw=dataValidator.isPositiveNumber(d.rw,errors.invalidRH)||defaults.rw,chart.rx=dataValidator.isPositiveNumber(d.rx,errors.invalidRX)||defaults.rx,chart.ry=dataValidator.isPositiveNumber(d.ry,errors.invalidRY)||defaults.ry,chart.rc=d.rc||defaults.rc,this.selectAll("rect").data(d.data)},insert:function(){return this.append("rect")},events:{enter:function(){return this.chart().eventManager.bindAll(this),this},merge:function(){var chart=this.chart();return this.attr("height",chart.rh).attr("width",chart.rw).attr("rx",chart.rx).attr("ry",chart.ry).attr("x",_.partial(chart.x,chart)).attr("y",_.partial(chart.y,chart)).attr("class",_.partial(chart["class"],chart)),this},exit:function(){return this.remove()}}};this.layer("roundedrects",this.base,options)},x:function(chart,d){return chart.xscale.map(d.x,1)+chart.xscale.band(1)/2-chart.rw/2},y:function(chart,d){return chart.yscale.map(d.y)-chart.rh},"class":function(chart,d){return d.rc||chart.rc}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/text",["d3.chart","charty/chartynames","charty/simpledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){var Label={initialize:function(){var options={dataBind:this.dataBind,insert:this.insert,events:{enter:this.enter,merge:this.merge,exit:this.exit}};this.layer("texts",this.base.append("g"),options)},x:function(chart,d){return chart.xscale.map(d.x,1)+chart.xscale.band(1)/2},y:function(chart,d){return chart.yscale.map(d.y)-15},dx:function(){return""},dy:function(){return""},text:function(d){return d.y},dataBind:function(d){return this.selectAll("text").data(d.data)},insert:function(){return this.append("text")},enter:function(){var chart=this.chart();return this.attr("text-anchor","middle").attr("dy","0.35em"),chart.eventManager.bindAll(this),this},merge:function(){var chart=this.chart();return this.attr("x",_.partial(chart.x,chart)).attr("y",_.partial(chart.y,chart)).attr("dx",_.partial(chart.dx,chart)).attr("dy",_.partial(chart.dy,chart)).text(chart.text),this},exit:function(){return this.remove()}};d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.TEXT,Label)}),function(root,factory){"function"==typeof define&&define.amd?define("charty/abovetext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.ABOVE_TEXT,{initialize:function(){var textLayer=this.layer("texts");textLayer.off("merge"),textLayer.on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0);this.attr("x",function(d){var pos=0;return chart.zScale&&(pos+=chart.zScale.map(d.z,1)),pos+=chart.xscale.map(d.x,chart.factor||1)+chart.xscale.band(chart.factor||1)/2}).attr("y",function(d){return Math.min(zeroY,chart.yscale.map(d.y,chart.factor))-7}).text(chart.text)})}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/righttext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.RIGHT_TEXT,{initialize:function(){var textLayer=this.layer("texts");textLayer.off("merge"),textLayer.on("merge",function(){var chart=this.chart();return this.attr("x",function(d){return chart.xscale.map(d.x,chart.factor)+12}).attr("y",function(d){return chart.yscale.map(d.y,chart.factor)+chart.yscale.band(chart.factor||1)/2}).text(chart.text),this})}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/winlosstext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.WIN_LOSS_TEXT,{initialize:function(){var textLayer=this.layer("texts"),offset=0;textLayer.off("merge"),textLayer.on("merge",function(){var chart=this.chart(),zeroY=chart.yscale.map(0),heightZeroY=chart.h-zeroY;this.attr("x",function(d){var pos=0;return chart.zScale&&(pos+=chart.zScale.map(d.z,1)),pos+=chart.xscale.map(d.x,chart.factor||1)+chart.xscale.band(chart.factor||1)/2}).attr("y",function(d){var yPos,yScaleMap=chart.yscale.map(d.y,chart.factor);return d.reset&&(offset=0),yPos=yScaleMap+offset+(chart.yscale.band(chart.h,d.y)-heightZeroY)/2,offset=offset+yScaleMap-zeroY,yPos}).text(chart.text)})}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/labeledtext",["d3.chart","charty/chartynames","charty/text"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.TEXT).extend(Charty.CHART_NAMES.LABELED_TEXT,{x:function(chart,d){return d.label?chart.xscale.map(d.x,1):0},y:function(chart,d){return d.label?chart.yscale.map(d.y):0},dx:function(chart,d){return d.label&&d.label.text?-(d.label.text.toString().length/4)+"em":0},dy:function(){return"0.25em"},text:function(d){return d.label?d.label.text||"":""},enter:function(){this.chart().eventManager.bindAll(this)},exit:function(){return this.remove()}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/triangle",["d3.chart","charty/chartynames","underscore","charty/simpledatagroup"],function(d3,Charty,_){return factory(d3,Charty,_)}):factory(d3,Charty,_)}(this,function(d3,Charty,_){d3.chart(Charty.CHART_NAMES.SIMPLE_DATA_GROUP).extend(Charty.CHART_NAMES.TRIANGLE,{initialize:function(){var defaults={c:"triangle-default"},options={dataBind:function(d){var chart=this.chart();return chart.c=d.c||defaults.c,this.selectAll("path").data(d.data)},insert:function(){return this.append("path")},events:{enter:function(){return this.chart().eventManager.bindAll(this),this},merge:function(){var chart=this.chart();return this.attr("class",function(d){return d.c||chart.c}).attr("d",function(d){return chart.getPath(d)}),this},exit:function(){return this.remove()}}};this.layer("triangles",this.base.append("g"),options)},transform:function(data){var result=[],dataArray=data.next().data,self=this,xBand=this.xscale.band(1),zeroY=this.yscale.map(0);return _.each(dataArray,function(element){var x1=self.xscale.map(element.x,1),x2=x1+xBand/2,x3=x1+xBand,y1=zeroY,y2=self.yscale.map(element.y);result.unshift({x1:x1,y1:y1,x2:x2,y2:y2,x3:x2,y3:y1,c:element.c1,x:element.x,y:element.y}),result.unshift({x1:x2,y1:y1,x2:x2,y2:y2,x3:x3,y3:y1,c:element.c2,x:element.x,y:element.y})}),{data:result,c:data.first().c}},getPath:function(d){return"M "+d.x1+" "+d.y1+" L "+d.x2+" "+d.y2+" L "+d.x3+" "+d.y3}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/multipledatagroup",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP,{transform:function(data){return this._calculateDomains(data),data},setDefaultXDomain:function(domain){return this.defaultXDomain=domain,this},setDefaultYDomain:function(domain){return this.defaultYDomain=domain,this},_calculateDomains:function(data){this.defaultXDomain?this.xscale.setDomain(this.defaultXDomain):this.xscale.calculateDomain(data,function(d){return d.x}),this.xscale.setRange(this.zScale?this.zScale.band(1):this.w),this.defaultYDomain?this.yscale.setDomain(this.defaultYDomain):this.yscale.calculateDomain(data,function(d){return d.y}),this.yscale.setRange(this.h)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/multipleinstancesmixin",["d3.chart","charty/chartynames","charty/basechart"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.BASE_CHART).extend(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,{initialize:function(args){var f=args.instances;this.componentsMixins=[];for(var i=args.instances-1;i>=0;i--){var instance=this.mixin(args.chartName,this.base.append("g"),args);instance.factor=f--/args.instances}}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/xyaxis",["d3.chart","charty/chartynames","charty/axis"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.XY_AXIS,{initialize:function(args){this.xaxis=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("bottom").setTextLabel(args.xAxisLabel).tickCount(args.xTickCount).tickFormat(args.xAxisTickFormat).setClass(args.xAxisClass).setRotation(args.xAxisTickRotation),this.yaxis=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("left").setTextLabel(args.yAxisLabel,"-90").tickCount(args.yTickCount).tickFormat(args.yAxisTickFormat).setClass(args.yAxisClass).setRotation(args.yAxisTickRotation)},showAsGrid:function(showAsGrid){return this.xaxis.showAsGrid(showAsGrid),this.yaxis.showAsGrid(showAsGrid),this},height:function(newHeight){return this.xaxis.ytranslate(newHeight).tickSize(newHeight),this.yaxis.height(newHeight),this},width:function(newWidth){return this.yaxis.tickSize(newWidth).width(newWidth),this.xaxis.width(newWidth),this},setXScale:function(scale){return this.xaxis.setScale(scale),this},setYScale:function(scale){return this.yaxis.setScale(scale),this}})}),function(root,factory){return"function"==typeof define&&define.amd?void define("charty/yxyaxis",["d3.chart","charty/chartynames","charty/xyaxis"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.YXY_AXIS,{initialize:function(args){this.xyaxis=this.mixin(Charty.CHART_NAMES.XY_AXIS,this.base.append("g"),args),this.yaxisright=this.mixin(Charty.CHART_NAMES.AXIS,this.base.append("g"),args).orient("right").tickCount(args.yTickCount).tickFormat(args.yAxisTickFormat)},showAsGrid:function(showAsGrid){return this.xyaxis.showAsGrid(showAsGrid),this},height:function(newHeight){return this.xyaxis.height(newHeight),this},width:function(newWidth){return this.yaxisright.xtranslate(newWidth),this.xyaxis.width(newWidth),this},setXScale:function(scale){return this.xyaxis.setXScale(scale),this},setYScale:function(scale){return this.xyaxis.setYScale(scale),this.yaxisright.setScale(scale),this}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/barchart",["d3.chart","charty/chartynames","underscore","charty/bar","charty/horizontalbar","charty/multipledatagroup","charty/xyaxis","charty/yxyaxis","charty/multipleinstancesmixin","charty/text","charty/abovetext","charty/righttext"],function(d3,Charty,_){return factory(d3,Charty,_)}):factory(d3,Charty,_)}(this,function(d3,Charty,_){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.BAR_CHART,{initialize:function(args){args.instances=args.instances||1,args.chartName=args.barType,this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid),this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args),args.labelType&&this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),_.extend(args,{chartName:args.labelType}))}})}),function(root,factory){return"function"==typeof define&&define.amd?void define("charty/groupedbarchart",["d3.chart","charty/scalesfactory","charty/chartynames","charty/bar","charty/xyaxis","charty/multipledatagroup","charty/multipleinstancesmixin"],function(d3,ScaleFactory,Charty){return factory(d3,ScaleFactory,Charty)}):factory(d3,ScaleFactory,Charty)}(this,function(d3,ScaleFactory,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.GROUPED_BAR_CHART,{initialize:function(args){this.axisSystem=this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid),this.bars=this.mixin(Charty.CHART_NAMES.BAR,this.base.append("g"),args)},transform:function(data){return data.first(),this.defaultZDomain?this.zScale.setDomain(this.defaultZDomain):this.zScale.calculateDomain(data,function(d){return d.z}),this.zScale.setRange(this.w),this._calculateDomains(data),this.axisSystem.setXScale(this.zScale),this.bars.setZScale(this.zScale),data},setZScale:function(zScale){return zScale&&(this.zScale=zScale),this},setDefaultZDomain:function(zDomain){return this.defaultZDomain=zDomain,this}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/donutwithinnertext",["d3.chart","charty/chartynames","charty/donut"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.DONUT).extend(Charty.CHART_NAMES.DONUT_INNER_TEXT,{initialize:function(args){var dataValidator=args.dataValidator,errors={invalidFontSize:"Invalid value : font size must be positive"},defaults={fontSize:55},options={dataBind:function(d){var chart=this.chart(),data=d.data,stringValue=data[0].y.toString()+"%";return chart.fontSize=dataValidator.isPositiveNumber(d.fontSize,errors.invalidFontSize)||defaults.fontSize,chart.xPosition=d.xPosition||chart.w/2,chart.yPosition=d.yPosition||chart.h/2,this.selectAll("text").data([stringValue])
},insert:function(){return this.append("text")},events:{enter:function(){var chart=this.chart();return this.attr("x",chart.xPosition).attr("y",chart.yPosition).attr("dy","0.35em").attr("text-anchor","middle").attr("font-size",chart.fontSize).text(function(d){return d}),this},update:function(){return this.text(function(d){return d}),this},exit:function(){return this.remove()}}};this.layer("donutText",this.base.append("g"),options)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/labeledtrianglechart",["d3.chart","charty/chartynames","charty/triangle","charty/roundedrectangle","charty/text","charty/multipleinstancesmixin","charty/yxyaxis","charty/multipledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LABELED_TRIANGLE_CHART,{initialize:function(args){this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid),this.mixin(Charty.CHART_NAMES.TRIANGLE,this.base.append("g"),args),this.mixin(Charty.CHART_NAMES.ROUNDED_RECTANGLE,this.base.append("g"),args),this.mixin(Charty.CHART_NAMES.TEXT,this.base.append("g"),args)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/linechart",["d3.chart","charty/chartynames","charty/line","charty/multipledatagroup"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE_CHART,{initialize:function(args){args.chartName=Charty.CHART_NAMES.LINE,args.instances=args.instances||1,this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid),this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/linechartcircles",["d3.chart","charty/chartynames","charty/multipledatagroup","charty/linechart","charty/multipleinstancesmixin"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.LINE_CHART_CIRCLES,{initialize:function(args){this.mixin(Charty.CHART_NAMES.LINE_CHART,this.base.append("g"),args),args.chartName=Charty.CHART_NAMES.CIRCLE,args.instances=args.instances||1,this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base.append("g"),args)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/scatterplot",["d3.chart","charty/chartynames","charty/circle","charty/multipledatagroup","charty/yxyaxis","charty/multipleinstancesmixin","charty/labeledtext"],function(d3,Charty){return factory(d3,Charty)}):factory(d3,Charty)}(this,function(d3,Charty){d3.chart(Charty.CHART_NAMES.MULTIPLE_DATA_GROUP).extend(Charty.CHART_NAMES.SCATTERPLOT,{initialize:function(args){args.chartName=Charty.CHART_NAMES.CIRCLE,args.instances=args.instances||1,this.mixin(args.axisSystem,this.base.append("g"),args).showAsGrid(args.showAsGrid),this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base,args),args.chartName=Charty.CHART_NAMES.LABELED_TEXT,this.mixin(Charty.CHART_NAMES.MULTIPLE_INSTANCES_MIXIN,this.base,args)}})}),function(root,factory){"function"==typeof define&&define.amd?define("charty/accessor",function(){return factory()}):root.Accessor=factory()}(this,function(){function Accessor(){this.index=-1}return Accessor.prototype.first=function(){return this.data[0]},Accessor.prototype.next=function(){return this.hasNext()||this.restart(),this.data[++this.index]},Accessor.prototype.hasNext=function(){return this.index+1<this.data.length},Accessor.prototype.restart=function(){return this.index=-1,this},Accessor.prototype.getData=function(){return this.data},Accessor.prototype.setData=function(data){return this.data=data,this},Accessor.prototype.getLength=function(){return this.data.length},Accessor}),function(root,factory){"function"==typeof define&&define.amd?define("charty/functionevent",[],function(){return factory()}):root.FunctionEvent=factory()}(this,function(){function FunctionEvent(options){this.opts=options}return FunctionEvent.prototype.bind=function(target){return target.on(this.opts.on,this.opts.execute),this},FunctionEvent}),function(root,factory){"function"==typeof define&&define.amd?define("charty/bootstrapevent",["bootstrap","underscore","d3"],function($,_,d3){return factory($,_,d3)}):root.BootstrapEvent=factory($,_,d3)}(this,function($,_){function BootstrapEvent(options){this.opts=options}return BootstrapEvent.prototype.bind=function(target){var self=this;return _.each(target[0],function(element){var d3Element=d3.select(element);d3Element.attr("data-toggle",self.opts.type),$(element)[self.opts.type]({placement:self.opts.placement,trigger:self.opts.trigger,html:!0,container:"body",context:d3Element,content:function(){return self.opts.content(element)}})}),this},BootstrapEvent}),function(root,factory){"function"==typeof define&&define.amd?define("charty/eventfactory",["charty/functionevent","charty/bootstrapevent"],function(FunctionEvent,BootstrapEvent){return factory(FunctionEvent,BootstrapEvent)}):root.EventFactory=factory(FunctionEvent,BootstrapEvent)}(this,function(FunctionEvent,BootstrapEvent){function EventFactory(){}return EventFactory.prototype.createEvent=function(e){var EventObject=null;switch(e.type){case"function":EventObject=new FunctionEvent({on:e.evt,execute:e.bind});break;case"bootstrap":EventObject=new BootstrapEvent({trigger:e.evt,type:e.element,content:e.bind,placement:e.placement})}return EventObject},EventFactory}),function(root,factory){"function"==typeof define&&define.amd?define("charty/eventmanager",["charty/functionevent","charty/bootstrapevent","underscore"],function(FunctionEvent,BootstrapEvent,_){return factory(FunctionEvent,BootstrapEvent,_)}):root.EventManager=factory(FunctionEvent,BootstrapEvent,_)}(this,function(FunctionEvent,BootstrapEvent,_){function EventManager(){this.events=[]}return EventManager.prototype.addEvent=function(e){return this.events.push(e),this},EventManager.prototype.bindAll=function(t){return _.each(this.events,function(e){e.bind(t)}),this},EventManager}),function(root,factory){"function"==typeof define&&define.amd?define("charty/chartinterface",["charty/accessor","charty/eventmanager","charty/eventfactory","underscore"],function(Accessor,EventManager,EventFactory,_){return factory(Accessor,EventManager,EventFactory,_)}):root.ChartInterface=factory(Accessor,EventManager,EventFactory,_)}(this,function(Accessor,EventManager,EventFactory,_){var ChartInterface=function(chart,rootSelection,svg,gSvg,eventFactory){this.accessor=new Accessor,this.chart=chart,this.rootSelection=rootSelection,this.svg=svg,this.gSvg=gSvg,this.eventFactory=eventFactory};return ChartInterface.prototype.setDimensions=function(margin,width,height){var marginValues={left:0,top:0,right:0,bottom:0,lfactor:1,tfactor:1},svgHeight=height||parseInt(this.rootSelection.style("height"),10)||200,svgWidth=width||parseInt(this.rootSelection.style("width"),10)||200;this.svg.attr("width",svgWidth).attr("height",svgHeight).attr("viewBox","0 0 "+svgWidth+" "+svgHeight).attr("preserveAspectRatio","xMinYMin"),margin&&(marginValues={left:margin.marginleft||0,top:margin.margintop||0,right:margin.marginright||0,bottom:margin.marginbottom||0,lfactor:margin.marginlfactor||1,tfactor:margin.margintfactor||1},this.gSvg.attr("transform","translate("+marginValues.left+","+marginValues.top+")")),svgWidth=(svgWidth-marginValues.right)*marginValues.lfactor,svgHeight=(svgHeight-marginValues.bottom)*marginValues.tfactor,this.chart.height(svgHeight).width(svgWidth)},ChartInterface.prototype.draw=function(dataArray,eventsArray){var eventManager=new EventManager,self=this;return _.each(eventsArray,function(e){eventManager.addEvent(self.eventFactory.createEvent(e))}),this.chart.setEventManager(eventManager),this.accessor.setData(dataArray),this.chart.draw(this.accessor),this},ChartInterface.prototype.redimension=function(height,width){var rootHeight=height||parseInt(this.rootSelection.style("height"),10),rootWidth=width||parseInt(this.rootSelection.style("width"),10),svgHeight=parseInt(this.svg.style("height"),10),svgWidth=parseInt(this.svg.style("width"),10);return(rootHeight!==svgHeight||rootWidth!==svgWidth)&&(this.svg.attr("height",rootHeight),this.svg.attr("width",rootWidth)),this},ChartInterface.prototype.setBackgroundImage=function(imgClass){return this.rootSelection.classed(imgClass,!0),this.imgClass=imgClass,this},ChartInterface.prototype.removeBackgroundImage=function(){return this.rootSelection.classed(this.imgClass,!1),this},ChartInterface.prototype.setTitle=function(title,xPosition,yPosition){return this.svg.append("text").attr("x",xPosition||0).attr("y",yPosition||30).text(title),this},ChartInterface}),function(root,factory){"function"==typeof define&&define.amd?define("charty/charty",["charty/chartynames","charty/scalesfactory","charty/chartinterface","charty/datavalidator","charty/eventfactory","charty/barchart","charty/labeledtrianglechart","charty/linechart","charty/scatterplot","charty/donut","charty/donutwithinnertext","charty/linechartcircles","charty/groupedbarchart","charty/winlossbar","charty/winlosstext","charty/labeledtext"],function(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory){return factory(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory)}):root.Charty=factory(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory)}(this,function(Charty,ScaleFactory,ChartInterface,DataValidator,EventFactory){var scaleFactory=new ScaleFactory,dataValidator=new DataValidator,eventFactory=new EventFactory;return Charty.chart=function(options){if(!options.root||!options.chartName)throw new Error("Root element or chart name not defined");var selection=d3.select(options.root),svg=selection.append("svg");if(options.gradients){var defs=svg.append("defs");_.each(options.gradients,function(gradient){var grad=defs.append("linearGradient");grad.attr("id",gradient.id),"vertical"===gradient.orientation&&grad.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",1),_.each(gradient.classes,function(gradientClass){grad.append("stop").attr("class",gradientClass.className).attr("offset",gradientClass.offset)})})}var gSvg=svg.append("g");options.dataValidator=dataValidator;var chart=gSvg.chart(options.chartName,options);return options.xAxis&&chart.setXScale(scaleFactory.scale(options.xAxis,"x")),options.yAxis&&chart.setYScale(scaleFactory.scale(options.yAxis,"y")),options.zAxis&&chart.setZScale(scaleFactory.scale(options.zAxis,"x")),options.defaultXDomain&&chart.setDefaultXDomain(options.defaultXDomain),options.defaultYDomain&&chart.setDefaultYDomain(options.defaultYDomain),options.defaultZDomain&&chart.setDefaultZDomain(options.defaultZDomain),new ChartInterface(chart,selection,svg,gSvg,eventFactory)},Charty});
//# sourceMappingURL=charty.min.js.map